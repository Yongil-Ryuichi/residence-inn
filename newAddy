from multiprocessing.connection import wait
import time
from selenium import webdriver
from selenium.webdriver.chrome.service import Service as ChromeService
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.common.by import By



# Open requested URL
driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()))
driver = webdriver.Chrome(executable_path=r"C:\Users\Samuel\Downloads\chromedriver_win32\chromedriver.exe")
driver.maximize_window()
driver.get('https://www.hotels.com/')

# Avoid Bot Detection


# If it does not work immediately, give it 10 seconds
driver.implicitly_wait(10)

# Toggle the search bar
search = driver.find_element(By.XPATH, "//*[@id='lodging_search_form']/div/div/div[1]").click()
time.sleep(2)
# Enter name of hotel 
driver.find_element(By.XPATH, "//*[@id='destination_form_field']").send_keys("ALABAMA RESIDENCE INN DECATUR")
time.sleep(5)
# Click on corresponding hotel
driver.find_element(By.XPATH, "//*[@id='destination_form_field-menu']/div[2]/div[2]/ul/li[1]").click()
time.sleep(3)
# Enter the submit button to serach for result
driver.find_element(By.XPATH, "//*[@id='submit_button']").click()
time.sleep(2)
print("hello lets see if this works")
driver.implicitly_wait(10)
# Click the hotel to go to its own site
website = driver.find_element(By.CSS_SELECTOR, "#app-layer-base > div:nth-child(1) > main > div > div > div > div > div.uitk-layout-flex-item.uitk-layout-flex-item-flex-grow-1 > section > div > div.uitk-spacing.search-results-listing.uitk-spacing-padding-small-block-three.uitk-spacing-padding-medium-blockstart-one.uitk-spacing-padding-large-blockstart-three > div > div.uitk-layout-grid-item.uitk-layout-grid-item-columnspan.uitk-layout-grid-item-columnspan-3 > section.results > ol > li:nth-child(1) > div > a").click()
driver.implicitly_wait(10)
time.sleep(3)

# Create lists
address_list = []

driver.refresh()
print("refreshing page...")
time.sleep(3)

try:
    address = driver.find_elements(By.XPATH, "//*[@id='app-layer-base']/div[1]/main/div/div/div[1]/section/div[1]/div[2]/div[2]/div[1]/div/div[1]/div[2]/div/div/div[1]/div/div/div[1]")
    for addy in address:
        print(addy.text)
except:
    print("not here")


 

