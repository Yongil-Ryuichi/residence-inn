from requests import options
from selenium import webdriver
import time
import undetected_chromedriver as uc
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.support.wait import WebDriverWait


if __name__ == '__main__':
    options = webdriver.ChromeOptions()
    # Add/ Use a proxy
    #options.add_argument('#Enter Proxy here')
    #
    options.add_argument(r'--user-data-dir=C:\Users\Samuel\AppData\Local\Google\Chrome\User Data\Default') 

    driver = uc.Chrome(
        options = options
    )    
    # Open requested URL
    driver.get('https://www.hotels.com')
    driver.maximize_window()

     # If it does not work immediately, give it 10 seconds
    driver.implicitly_wait(10)

    # Toggle the search bar
    search = driver.find_element(By.XPATH, "//*[@id='lodging_search_form']/div/div/div[1]").click()
    time.sleep(2)
    # Enter name of hotel 
    driver.find_element(By.XPATH, "//*[@id='destination_form_field']").send_keys("ALABAMA RESIDENCE INN DECATUR")
    time.sleep(5)
    # Click on corresponding hotel
    driver.find_element(By.XPATH, "//*[@id='destination_form_field-menu']/div[2]/div[2]/ul/li[1]").click()
    time.sleep(3)
    # Enter the submit button to serach for result
    driver.find_element(By.XPATH, "//*[@id='submit_button']").click()
    time.sleep(2)
    print("hello lets see if this works")
    driver.implicitly_wait(10)
    # Click the hotel to go to its own site
    website = driver.find_element(By.CSS_SELECTOR, "#app-layer-base > div:nth-child(1) > main > div > div > div > div > div.uitk-layout-flex-item.uitk-layout-flex-item-flex-grow-1 > section > div > div.uitk-spacing.search-results-listing.uitk-spacing-padding-small-block-three.uitk-spacing-padding-medium-blockstart-one.uitk-spacing-padding-large-blockstart-three > div > div.uitk-layout-grid-item.uitk-layout-grid-item-columnspan.uitk-layout-grid-item-columnspan-3 > section.results > ol > li:nth-child(1) > div > a").click()
    driver.implicitly_wait(10)
    time.sleep(3)


    # Create lists
    address_list = []


    print("refreshing page...")
    time.sleep(3)
    driver.execute_script("window.scrollTo(0,document.body.scrollHeight)")
    time.sleep(15)
    try:
        address = driver.find_element(By.CSS_SELECTOR, "#app-layer-base > div.page-container.infosite > main > div > div > div.uitk-layout-flex-item.main-body.m-t-margin-two.l-t-margin-three.xl-t-margin-three > section > div.infosite__content.infosite__content--details > div.uitk-layout-grid.uitk-layout-grid-columns-3 > div:nth-child(2) > div:nth-child(1) > div > div.uitk-layout-grid.uitk-layout-grid-columns-small-1.uitk-layout-grid-columns-medium-1.uitk-layout-grid-columns-large-12 > div.uitk-layout-grid-item.uitk-layout-grid-item-columnspan.uitk-layout-grid-item-columnspan-small-1.uitk-layout-grid-item-columnspan-medium-1.uitk-layout-grid-item-columnspan-large-4 > div > div > div.uitk-spacing.uitk-spacing-padding-large-blockend-six.uitk-layout-flex-item > div > div > div.uitk-text.uitk-type-300.uitk-layout-flex-item.uitk-layout-flex-item-flex-basis-full_width.uitk-text-default-theme")
        print(address.text)
    except:
        print("not here")

    time.sleep(100)

 

   
   
